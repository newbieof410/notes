# 什么是容器
同虚拟机类似, 容器也用来提供运行软件的隔离环境,  而且它们都还能够在主机间迁移. 所以, 提到容器, 很容易会联系到虚拟机. 但是容器不是虚拟机, 它们的底层架构有着根本上的差异.

## 容器不是虚拟机
为了说明问题, 这里作一个类比, 把容器比作大楼里的公寓, 把虚拟机比作独栋的房子.

一栋房子 (VM) 是完全独立的, 能将不受欢迎的客人阻挡在外. 它有自己的基础设施--管线, 暖气, 电力等等. 而且, 通常情况下至少都会有卧室, 客厅, 卫生间和厨房. 但是很难找到一栋只有工作室的房子, 即使买到了一栋最小的, 可能还是会发现它相比需要太大了, 因为房子都是这么盖的.

公寓 (Docker 容器) 同样能将不想见的人挡在外面, 不同是它们共享基础设施. 公寓大楼 (运行 Docker 的主机) 为每间公寓提供了公用的管线, 暖气和电力. 此外, 公寓可选择的大小更多, 即有单间的工作室, 也有配备多间卧室还有阁楼的套房. 这样就能根据需要选择大小.

总结起来就是, Docker 容器共享主机资源, 只把运行应用所必须的依赖添加进来; 而 VM 则要先安装一个操作系统, 虽然很多组件并不需要但可能也无法去除.

## 容器 vs. VM
VM 运行在虚拟机监视器虚拟出的硬件上 (将一套硬件设备虚拟为多套); 容器共享操作系统内核, 运行在相互隔离的用户空间中 (将一个操作系统虚拟为多个操作系统), 容器虚拟化又被称为操作系统级虚拟化.

因为共享操作系统内核, 所以容器对底层的操作系统有较大依赖. 其中运行的系统要近似于底层系统.

容器间的隔离度比 VM 间要低.

新技术, 如 `OpenVZ`, `Solar Zones` 和 `lxc`, 的引入使容器更像是一个完整的宿主机, 而不仅是运行环境. Docker 借助控制组和命名空间等新的 Linux 内核技术, 更是提高了容器的隔离性.

传统的虚拟化或半虚拟化技术, 依赖于模拟层或虚拟机管理层运行虚拟机, 而容器使用的是系统调用接口, 因而运行时的额外开销更小, 可以运行更多的实例.

因为容器本身的复杂性, 还难于安装, 管理和自动化, 这项技术并未得到广泛应用. 但 Docker 的出现则改变了这一现状.

## 参考文档
- Docker for Virtualization Admin
- The Docker Book
